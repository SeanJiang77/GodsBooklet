GodsBooklet — 产品企划书 v1.0

1. 产品愿景

-   一句话定位：帮助狼人杀主持人（上帝）轻松管理游戏流程与玩家信息。
-   长远愿景：降低主持难度，让新手也能顺利主持；支持多人房间、历史记录和复盘。

------------------------------------------------------------------------

2. 用户画像

-   新手主持人：需要清晰的流程指引。
-   资深主持人：需要自定义、快捷操作。
-   社团/俱乐部组织者：需要保存配置、历史记录、统计数据。

------------------------------------------------------------------------

3. 核心需求 (JTBD)

1.  快速创建房间（经典/自定义角色配置）。
2.  引导式游戏流程（夜晚 → 白天 → 投票 → 结束）。
3.  自动处理规则冲突（如守卫连守、女巫自救）。
4.  生成并导出游戏日志与结果。

------------------------------------------------------------------------

4. MVP 范围

功能

-   房间创建（配置规则、人数、角色）
-   玩家管理（昵称、座位号、存活状态）
-   角色分配（随机/手动）
-   夜晚流程（守卫、狼人、预言家、女巫）
-   白天流程（发言、投票、警长流程可选）
-   游戏日志（记录关键事件，检查胜负条件）

不包含

-   多设备实时同步、用户系统、观战功能。

------------------------------------------------------------------------

5. 技术实现概要

-   后端：Node.js + Express + MongoDB
-   前端：React + Vite + Tailwind
-   数据模型：Room、Player、Rules、Event

------------------------------------------------------------------------

6. V1 路线图

-   Preset 模板（9人/12人局）
-   更多规则切换（女巫首夜自救、守卫连守等）
-   多语言 UI（中/英切换）
-   玩家历史数据与胜率统计

------------------------------------------------------------------------

7. 后续迭代 (V2+)

-   多端同步（主持人面板 + 玩家端投票）
-   自定义角色与夜晚流程脚本化
-   云端存储 & 俱乐部管理面板
-   扩展职业（白痴、情侣、猎人等）

------------------------------------------------------------------------

8. 成功指标

-   房间创建到开始游戏 ≤ 2 分钟
-   主持人失误率 < 1 次/局
-   90% 以上的玩家完成首夜 → 白天流程

------------------------------------------------------------------------

9. Sprint Backlog (建议拆解)

Sprint 1 — 基础房间 & 玩家

-   后端：扩展 Room Schema，新增 players/status/log
-   API：POST /rooms 创建房间，GET /rooms/:id 获取房间
-   API：POST /rooms/:id/players 添加玩家
-   前端：房间创建页面（表单）
-   前端：玩家设置页面（昵称输入 → 保存）

Sprint 2 — 角色分配 & 流程引导

-   后端：POST /rooms/:id/assign 分配角色
-   后端：流程状态机 (night/day 切换 + 规则验证)
-   前端：角色确认页（GM 专用）
-   前端：主持人面板（当前阶段 + 操作按钮 + 计时器）

Sprint 3 — 日志 & 游戏结束

-   后端：POST /rooms/:id/step 执行动作并写入日志
-   后端：POST /rooms/:id/undo 撤销
-   前端：日志面板（事件时间线、撤销按钮）
-   胜利条件判定 & 结束页面
-   导出游戏记录 (JSON/PNG)

------------------------------------------------------------------------

10. Definition of Done (验收标准)

-   所有 API 能通过 Postman 测试
-   前端能完成「创建房间 → 添加玩家 → 保存 DB」全流程
-   错误状态能前端提示
